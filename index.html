<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√în t·∫≠p HSG & TS10 Chuy√™n Tin</title>
    <script>window.MathJax = { tex: { inlineMath: [['$', '$']] } };</script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/cpp.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Tinh ch·ªânh ƒë·ªÉ Code hi·ªÉn th·ªã ƒë·∫πp h∆°n v·ªõi Highlight.js */
        pre code.hljs {
            padding: 1.5em;
            border-radius: 8px;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 15px;
            line-height: 1.6;
        }
    </style>
</head>
<body>

    <header id="main-header">
        <button class="toggle-btn" onclick="toggleSidebar()">‚ò∞ <span>MENU</span></button>
        <h1 class="header-title">H∆Ø·ªöNG D·∫™N V√Ä M√î PH·ªéNG ƒê·ªÄ THI H·ªåC SINH GI·ªéI TIN H·ªåC THCS</h1>
    </header>

    <div class="wrapper">
        <nav id="sidebar">
            <div class="menu-category" onclick="toggleSubmenu('sub1')">1. TP H·ªì Ch√≠ Minh <span>‚ñæ</span></div>
            <div id="sub1" class="submenu">
                <div class="menu-item" onclick="toggleSubmenu('hcm0910')">NƒÉm h·ªçc 2009 - 2010 <span style="float: right;">‚ñæ</span></div>
                <div id="hcm0910" class="submenu hidden" style="background: #1e293b;">
                    <a href="#" class="menu-item" onclick="loadLesson('hcm0910_nhiphan')">B√†i 1: Nh·ªã ph√¢n</a>
                    <a href="#" class="menu-item" onclick="loadLesson('hcm0910_tong')">B√†i 2: T·ªïng</a>
                    <a href="#" class="menu-item" onclick="loadLesson('hcm0910_lamvuon')">B√†i 3: L√†m v∆∞·ªùn</a>
                </div>
                <div class="menu-item" onclick="toggleSubmenu('hcm1011')">NƒÉm h·ªçc 2010 - 2011 <span style="float: right;">‚ñæ</span></div>
                <div id="hcm1011" class="submenu hidden" style="background: #1e293b;">
                    <a href="#" class="menu-item" onclick="loadLesson('hcm1011_sodu')">B√†i 1: S·ªë d∆∞</a>
                    <a href="#" class="menu-item" onclick="loadLesson('hcm1011_hammobius')">B√†i 2: H√†m Mobius</a>
                    <a href="#" class="menu-item" onclick="loadLesson('hcm1011_biendoi')">B√†i 3: Bi·∫øn ƒë·ªïi</a>
                </div>
                <div class="menu-item" onclick="toggleSubmenu('hcm1112')">NƒÉm h·ªçc 2011 - 2012 <span style="float: right;">‚ñæ</span></div>
                <div id="hcm1112" class="submenu hidden" style="background: #1e293b;">
                    <a href="#" class="menu-item" onclick="loadLesson('hcm1112_chuoi')">B√†i 1: Chu·ªói</a>
                    <a href="#" class="menu-item" onclick="loadLesson('hcm1112_laptop')">B√†i 2: Laptop</a>
                    <a href="#" class="menu-item" onclick="loadLesson('hcm1112_socola')">B√†i 3: Socola</a>
                </div>
            </div>

        </nav>

        <main id="main-content">
            <div id="render-content">
                <div class="step-card border-blue">
                    <h2 style="text-align: center;">Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi h·ªá th·ªëng h∆∞·ªõng d·∫´n m√¥ ph·ªèng gi·∫£i ƒë·ªÅ thi h·ªçc sinh gi·ªèi tin h·ªçc THCS</h2>
                    <p style="text-align: center;">Vui l√≤ng ch·ªçn m·ªôt chuy√™n ƒë·ªÅ ·ªü Menu b√™n tr√°i ƒë·ªÉ b·∫Øt ƒë·∫ßu.</p>
                </div>
            </div>
            <footer class="teacher-footer">
                <div class="footer-title">Th·∫ßy Ho√†ng ƒêƒÉng Quang - Luy·ªán thi Chuy√™n Tin 10</div>
                <div class="footer-info">
                    <span class="footer-item">üìû 0903781593</span>
                    <a href="http://luyenthichuyentin10.edu.vn" target="_blank" class="footer-item">üåê luyenthichuyentin10.edu.vn</a>
                </div>
            </footer>
        </main>
    </div>

    <script>
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('collapsed');
            document.getElementById('main-content').classList.toggle('expanded');
        }

        function toggleSubmenu(id) {
            document.getElementById(id).classList.toggle('hidden');
        }

        async function loadLesson(lessonId) {
            // 1. ƒê√°nh d·∫•u menu active
            document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));
            if(event && event.currentTarget) event.currentTarget.classList.add('active');

            const renderArea = document.getElementById('render-content');
            renderArea.innerHTML = "<p>ƒêang t·∫£i n·ªôi dung...</p>";

            try {
                // T·∫£i file markdown (Th√™m cache breaker ƒë·ªÉ tr√°nh l·ªói kh√¥ng ƒë·ªïi n·ªôi dung)
                const response = await fetch(`lessons/${lessonId}.md?v=${new Date().getTime()}`);
                if (!response.ok) throw new Error("Kh√¥ng t√¨m th·∫•y file b√†i h·ªçc .md");
                
                const markdown = await response.text();

                // 2. Render Markdown tr∆∞·ªõc
                if (typeof marked !== 'undefined') {
                    renderArea.innerHTML = marked.parse(markdown);
                    
                    // Highlight code
                    renderArea.querySelectorAll('pre code').forEach((el) => {
                        hljs.highlightElement(el);
                    });

                    // MathJax
                    if (window.MathJax) MathJax.typesetPromise();
                }

                // 3. T·∫°o v√πng ch·ª©a m√¥ ph·ªèng NGAY L·∫¨P T·ª®C sau n·ªôi dung Markdown
                const simContainer = document.createElement('div');
                simContainer.id = 'simulation-area';
                renderArea.appendChild(simContainer);

                // 4. X·ª≠ l√Ω Script m√¥ ph·ªèng
                const oldScript = document.getElementById('dynamic-sim-script');
                if (oldScript) oldScript.remove();

                const script = document.createElement('script');
                script.id = 'dynamic-sim-script';
                script.src = `simulations/${lessonId}.js?v=${new Date().getTime()}`;
                
                script.onload = () => {
                    // G·ªçi tr·ª±c ti·∫øp t√™n h√†m theo lessonId m√† kh√¥ng c·∫ßn bi·∫øn ƒë·ªïi g√¨ th√™m
                    const initFuncName = `init_${lessonId}_simulation`; 
                    
                    if (typeof window[initFuncName] === 'function') {
                        window[initFuncName]();
                    } else {
                        console.error(`Kh√¥ng t√¨m th·∫•y h√†m kh·ªüi t·∫°o: ${initFuncName}`);
                    }
                };

                document.body.appendChild(script);
                window.scrollTo(0, 0);

            } catch (error) {
                renderArea.innerHTML = `<div class="step-card border-red">
                    <h2 style="color:red">L·ªói t·∫£i b√†i h·ªçc</h2>
                    <p>${error.message}</p>
                </div>`;
            }
        }
    </script>
</body>
</html>